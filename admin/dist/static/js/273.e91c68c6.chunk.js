"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[273],{2473:function(n,e,t){t.r(e),t.d(e,{default:function(){return L}});var l=t(1413),r=t(9439),i=t(5705),o=t(9491),a=t(6892),d=t(2971),s=t(3299),h=t(3200),u=t(7399),c=t(8982),p=t(2312),g=t(195),v=t(7313),m=t(56),x=t(5047),f=t(8197),Z=t(9624),j=t(3729),b=t(7952),C=t(7178),_=t(1245),T=t(9926),y=t(7218),I={},w=t(6417),k=function(n){var e=n.sizePage,t=n._onCloseModal,i=(0,_.Z)(),a=(0,r.Z)(i,1)[0],d=(0,m.useQueryClient)(),s=(0,v.useState)([]),h=(0,r.Z)(s,2),c=h[0],p=h[1],k=(0,v.useState)(!1),S=(0,r.Z)(k,2),N=S[0],P=S[1],q=(0,m.useMutation)((function(n){return function(n){return(0,u.D2)("/order/create",n)}((0,l.Z)((0,l.Z)({},n),{},{product:c}))}),{onSuccess:function(n){null===d||void 0===d||d.invalidateQueries([g.S.LIST_ORDER_KEY,e]),(0,y.tv)(n),t()},onError:function(n){(0,y.ux)(n)}}).mutate;return(0,v.useEffect)((function(){return function(){console.log("Run..."),a.resetFields(),p([])}}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:I.wrapCreateOrder,children:(0,w.jsxs)(x.Z,{form:a,onFinish:q,layout:"vertical",children:[(0,w.jsxs)(f.Z,{gutter:[16,16],children:[(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{label:"T\xean kh\xe1ch h\xe0ng",required:!0,tooltip:"T\xean kh\xe1ch h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",name:"customer_name",rules:[{required:!0,message:"T\xean kh\xe1ch h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(j.Z,{placeholder:"Nh\u1eadp t\xean kh\xe1ch h\xe0ng"})})}),(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{label:"M\xe3 \u0111\u01a1n h\xe0ng",required:!0,tooltip:"M\xe3 \u0111\u01a1n h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",name:"code_order",rules:[{required:!0,message:"M\xe3 \u0111\u01a1n h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(j.Z,{placeholder:"Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng"})})})]}),(0,w.jsxs)(f.Z,{gutter:[16,16],children:[(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{label:"Ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n",required:!0,tooltip:"Ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",name:"creator_order",rules:[{required:!0,message:"Ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(j.Z,{placeholder:"Nh\u1eadp ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n"})})}),(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{name:"ordering_branch",label:"Chi nh\xe1nh t\u1ea1o \u0111\u01a1n",children:(0,w.jsx)(b.Z,{showSearch:!0,placeholder:"Chi nh\xe1nh t\u1ea1o \u0111\u01a1n",optionFilterProp:"children",filterOption:function(n,e){var t;return(null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:"").includes(n)},filterSort:function(n,e){var t,l;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().localeCompare((null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:"").toLowerCase())},options:[{value:"C\u01a1 s\u1edf 1",label:"C\u01a1 s\u1edf 1"},{value:"C\u01a1 s\u1edf 2",label:"C\u01a1 s\u1edf 2"}]})})})]}),(0,w.jsxs)(f.Z,{gutter:[16,16],children:[(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{name:"order_status",label:"Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",children:(0,w.jsx)(b.Z,{showSearch:!0,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",optionFilterProp:"children",filterOption:function(n,e){var t;return(null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:"").includes(n)},filterSort:function(n,e){var t,l;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().localeCompare((null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:"").toLowerCase())},options:[{value:"\u0110\u1eb7t h\xe0ng",label:"\u0110\u1eb7t h\xe0ng"},{value:"\u0110ang giao d\u1ecbch",label:"\u0110ang giao d\u1ecbch"},{value:"Ho\xe0n th\xe0nh",label:"Ho\xe0n th\xe0nh"},{value:"\u0110\xe3 h\u1ee7y",label:"\u0110\xe3 h\u1ee7y"}]})})}),(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{name:"payment_status",label:"Tr\u1ea1ng th\xe1i Thanh to\xe1n",children:(0,w.jsx)(b.Z,{showSearch:!0,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i Thanh to\xe1n",optionFilterProp:"children",filterOption:function(n,e){var t;return(null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:"").includes(n)},filterSort:function(n,e){var t,l;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().localeCompare((null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:"").toLowerCase())},options:[{value:"Ch\u01b0a thanh to\xe1n",label:"Ch\u01b0a thanh to\xe1n"},{value:"Thanh to\xe1n m\u1ed9t ph\u1ea7n",label:"Thanh to\xe1n m\u1ed9t ph\u1ea7n"},{value:"Thanh to\xe1n to\xe0n b\u1ed9",label:"Thanh to\xe1n to\xe0n b\u1ed9"}]})})})]}),(0,w.jsx)(x.Z.Item,{label:"Kh\xe1ch ph\u1ea3i tr\u1ea3",name:"guest_must_pay",required:!0,tooltip:"Kh\xe1ch ph\u1ea3i tr\u1ea3 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",rules:[{required:!0,message:"Kh\xe1ch ph\u1ea3i tr\u1ea3 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(C.Z,{className:"w-100",placeholder:"Nh\u1eadp kh\xe1ch ph\u1ea3i tr\u1ea3"})}),(0,w.jsx)(x.Z.Item,{children:(0,w.jsx)(o.ZP,{type:"dashed",htmlType:"button",className:"w-100",onClick:function(){return P(!0)},children:"Ch\u1ecdn s\u1ea3n ph\u1ea9m"})}),(0,w.jsx)(x.Z.Item,{children:(0,w.jsx)(o.ZP,{type:"primary",htmlType:"submit",children:"T\u1ea1o m\u1edbi"})})]})}),(0,w.jsx)(T.Z,{isModalOpen:N,_onClose:function(){return P(!1)},quantityHas:!0,payData:c,_setPayData:p})]})},S={},N=function(n){var e=n.orderId,t=n.sizePage,i=n._onCloseModal,a=(0,_.Z)(),d=(0,r.Z)(a,1)[0],s=(0,m.useQueryClient)(),h=(0,v.useState)([]),c=(0,r.Z)(h,2),p=c[0],I=c[1],k=(0,v.useState)(!1),N=(0,r.Z)(k,2),P=N[0],q=N[1],L=(0,m.useQuery)([g.S.GET_BY_ID_ORDER,e],(function(){return function(n){return(0,u.zQ)("order/".concat(n))}(e)}),{enabled:Boolean(e)}),M=L.data,E=(L.isLoading,(0,m.useMutation)((function(n){return function(n,e){return(0,u.$P)("order/update/".concat(n),e)}(e,(0,l.Z)((0,l.Z)({},n),{},{product:p}))}),{onSuccess:function(n){null===s||void 0===s||s.invalidateQueries([g.S.LIST_ORDER_KEY,t]),(0,y.tv)(n),i()},onError:function(n){(0,y.ux)(n)}})),O=E.mutate;return(0,v.useEffect)((function(){var n;return d.setFieldsValue(null===M||void 0===M?void 0:M.data),I(null===M||void 0===M||null===(n=M.data)||void 0===n?void 0:n.product),function(){return d.resetFields()}}),[M]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:S.wrapEditOrder,children:(0,w.jsxs)(x.Z,{form:d,onFinish:O,layout:"vertical",children:[(0,w.jsxs)(f.Z,{gutter:[16,16],children:[(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{label:"T\xean kh\xe1ch h\xe0ng",required:!0,tooltip:"T\xean kh\xe1ch h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",name:"customer_name",rules:[{required:!0,message:"T\xean kh\xe1ch h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(j.Z,{placeholder:"Nh\u1eadp t\xean kh\xe1ch h\xe0ng"})})}),(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{label:"M\xe3 \u0111\u01a1n h\xe0ng",required:!0,tooltip:"M\xe3 \u0111\u01a1n h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",name:"code_order",rules:[{required:!0,message:"M\xe3 \u0111\u01a1n h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(j.Z,{placeholder:"Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng"})})})]}),(0,w.jsxs)(f.Z,{gutter:[16,16],children:[(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{label:"Ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n",required:!0,tooltip:"Ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",name:"creator_order",rules:[{required:!0,message:"Ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(j.Z,{placeholder:"Nh\u1eadp ng\u01b0\u1eddi t\u1ea1o \u0111\u01a1n"})})}),(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{name:"ordering_branch",label:"Chi nh\xe1nh t\u1ea1o \u0111\u01a1n",children:(0,w.jsx)(b.Z,{showSearch:!0,placeholder:"Chi nh\xe1nh t\u1ea1o \u0111\u01a1n",optionFilterProp:"children",filterOption:function(n,e){var t;return(null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:"").includes(n)},filterSort:function(n,e){var t,l;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().localeCompare((null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:"").toLowerCase())},options:[{value:"C\u01a1 s\u1edf 1",label:"C\u01a1 s\u1edf 1"},{value:"C\u01a1 s\u1edf 2",label:"C\u01a1 s\u1edf 2"}]})})})]}),(0,w.jsxs)(f.Z,{gutter:[16,16],children:[(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{name:"order_status",label:"Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",children:(0,w.jsx)(b.Z,{showSearch:!0,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",optionFilterProp:"children",filterOption:function(n,e){var t;return(null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:"").includes(n)},filterSort:function(n,e){var t,l;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().localeCompare((null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:"").toLowerCase())},options:[{value:"\u0110\u1eb7t h\xe0ng",label:"\u0110\u1eb7t h\xe0ng"},{value:"\u0110ang giao d\u1ecbch",label:"\u0110ang giao d\u1ecbch"},{value:"Ho\xe0n th\xe0nh",label:"Ho\xe0n th\xe0nh"},{value:"\u0110\xe3 h\u1ee7y",label:"\u0110\xe3 h\u1ee7y"}]})})}),(0,w.jsx)(Z.Z,{span:12,children:(0,w.jsx)(x.Z.Item,{name:"payment_status",label:"Tr\u1ea1ng th\xe1i Thanh to\xe1n",children:(0,w.jsx)(b.Z,{showSearch:!0,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i Thanh to\xe1n",optionFilterProp:"children",filterOption:function(n,e){var t;return(null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:"").includes(n)},filterSort:function(n,e){var t,l;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().localeCompare((null!==(l=null===e||void 0===e?void 0:e.label)&&void 0!==l?l:"").toLowerCase())},options:[{value:"Ch\u01b0a thanh to\xe1n",label:"Ch\u01b0a thanh to\xe1n"},{value:"Thanh to\xe1n m\u1ed9t ph\u1ea7n",label:"Thanh to\xe1n m\u1ed9t ph\u1ea7n"},{value:"Thanh to\xe1n to\xe0n b\u1ed9",label:"Thanh to\xe1n to\xe0n b\u1ed9"}]})})})]}),(0,w.jsx)(x.Z.Item,{label:"Kh\xe1ch ph\u1ea3i tr\u1ea3",name:"guest_must_pay",required:!0,tooltip:"Kh\xe1ch ph\u1ea3i tr\u1ea3 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",rules:[{required:!0,message:"Kh\xe1ch ph\u1ea3i tr\u1ea3 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}],children:(0,w.jsx)(C.Z,{className:"w-100",placeholder:"Nh\u1eadp kh\xe1ch ph\u1ea3i tr\u1ea3"})}),(0,w.jsx)(x.Z.Item,{children:(0,w.jsx)(o.ZP,{type:"dashed",htmlType:"button",className:"w-100",onClick:function(){return q(!0)},children:"Ch\u1ecdn s\u1ea3n ph\u1ea9m"})}),(0,w.jsx)(x.Z.Item,{children:(0,w.jsx)(o.ZP,{type:"primary",htmlType:"submit",children:"T\u1ea1o m\u1edbi"})})]})}),(0,w.jsx)(T.Z,{isModalOpen:P,_onClose:function(){return q(!1)},quantityHas:!0,payData:p,_setPayData:I})]})},P="styles_wrapOrder__qPVzS",q="styles_wrapContent__n0lq4",L=function(){var n,e=(0,v.useState)(!1),t=(0,r.Z)(e,2),x=t[0],f=t[1],Z=(0,v.useState)({orderId:null,modalHas:!1}),j=(0,r.Z)(Z,2),b=j[0],C=j[1],_=(0,v.useState)({name:null}),T=(0,r.Z)(_,2),y=T[0],I=T[1],S=(0,m.useQuery)([g.S.LIST_ORDER_KEY,y],(function(){return n=y,(0,u.zQ)("/order",n);var n})),L=S.data,M=S.isLoading,E=[{title:"M\xe3 \u0111\u01a1n h\xe0ng",dataIndex:"code_order",ellipsis:!0,responsive:["md"],align:"center",width:150,render:function(n){return(0,w.jsx)("a",{children:n})}},{title:"Ng\xe0y t\u1ea1o \u0111\u01a1n",dataIndex:"create_at",ellipsis:!0,responsive:["md"],render:function(n){return n}},{title:"T\xean kh\xe1ch h\xe0ng",dataIndex:"customer_name",ellipsis:!0,responsive:["md"],align:"left",render:function(n){return n}},{title:"Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",dataIndex:"order_status",ellipsis:!0,responsive:["md"],align:"center",width:150,render:function(n){return n}},{title:"Tr\u1ea1ng th\xe1i Thanh to\xe1n",dataIndex:"payment_status",ellipsis:!0,responsive:["md"],align:"center",width:150,render:function(n){return n}},{title:"Kh\xe1ch ph\u1ea3i tr\u1ea3",dataIndex:"guest_must_pay",ellipsis:!0,responsive:["md"],align:"right",width:150,render:function(n){return n}},{title:"T\xe1c v\u1ee5",dataIndex:"action",ellipsis:!0,responsive:["md"],align:"center",width:250,render:function(n,e){return(0,w.jsxs)(i.Z,{size:"middle",children:[(0,w.jsx)(o.ZP,{type:"dashed",onClick:function(){return function(n){var e=n._id;C({orderId:e,modalHas:!0})}(e)},htmlType:"button",size:"small",children:"Ch\u1ec9nh s\u1eeda"}),(0,w.jsx)(a.Z,{title:"X\xf3a phi\xean b\u1ea3n",placement:"topLeft",description:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?",onConfirm:function(){},okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",children:(0,w.jsx)(o.ZP,{type:"dashed",htmlType:"button",size:"small",children:"X\xf3a"})})]})}}],O=null===L||void 0===L||null===(n=L.data)||void 0===n?void 0:n.map((function(n,e){return(0,l.Z)((0,l.Z)({key:e},n),{},{create_at:"19/02/2023 14:59"})})),F=[{title:"STT",dataIndex:"stt",ellipsis:!0,responsive:["md"],width:100,align:"center",render:function(n){return(0,w.jsx)("a",{children:n})}},{title:"\u1ea2nh",dataIndex:"image",ellipsis:!0,responsive:["md"],align:"center",width:150,render:function(n){return(0,w.jsx)(d.Z,{src:n,alt:n})}},{title:"M\xe3 SKU",dataIndex:"barcode",ellipsis:!0,responsive:["md"],align:"center",width:150,render:function(n){return n}},{title:"T\xean s\u1ea3n ph\u1ea9m",dataIndex:"name_product",ellipsis:!0,responsive:["md"],render:function(n){return n}},{title:"S\u1ed1 l\u01b0\u1ee3ng",dataIndex:"quantity",ellipsis:!0,responsive:["md"],align:"center",width:150,render:function(n){return n}},{title:"\u0110\u01a1n gi\xe1",dataIndex:"unit_price",ellipsis:!0,responsive:["md"],align:"right",width:150,render:function(n){return n}},{title:"Th\xe0nh ti\u1ec1n",dataIndex:"into_money",ellipsis:!0,responsive:["md"],align:"right",width:150,render:function(n){return n}}],z=function(){return f(!1)},H=function(){return C({orderId:null,modalHas:!1})};return(0,w.jsxs)(c.Z,{children:[(0,w.jsxs)("div",{className:P,children:[(0,w.jsx)(p.Z,{_onCreate:function(){return f(!0)}}),(0,w.jsx)("div",{className:q,children:(0,w.jsx)(h.Z,{rowSelection:(0,l.Z)({type:"checkbox"},{onChange:function(n,e){},getCheckboxProps:function(n){return{disabled:!1,code_order:n.code_order}}}),columns:E,dataSource:O,loading:M,expandable:{expandedRowRender:function(n){var e;return console.log(n),(0,w.jsx)(h.Z,{columns:F,dataSource:null===n||void 0===n||null===(e=n.product)||void 0===e?void 0:e.map((function(n,e){return(0,l.Z)({key:e,stt:e+1},n)})),loading:!1,pagination:!1})},rowExpandable:function(n){return"Not Expandable"!==n.code_order}},pagination:{total:null===L||void 0===L?void 0:L.totalItems,showTotal:function(n,e){return"T\u1eeb ".concat((null===L||void 0===L?void 0:L.pageIndex)||1," \u0111\u1ebfn ").concat(n," tr\xean t\u1ed5ng ").concat(null===L||void 0===L?void 0:L.totalItems)},defaultPageSize:(null===L||void 0===L?void 0:L.pageSize)||5,defaultCurrent:1,onChange:function(n){return e=n,void I((0,l.Z)((0,l.Z)({},y),{},{pageIndex:e}));var e}}})})]}),x?(0,w.jsx)(s.Z,{title:"T\u1ea1o \u0111\u01a1n h\xe0ng",placement:"right",onClose:z,open:x,children:(0,w.jsx)(k,{_onCloseModal:function(){return z()},sizePage:y})}):null,null!==b&&void 0!==b&&b.modalHas?(0,w.jsx)(s.Z,{title:"S\u1eeda \u0111\u01a1n h\xe0ng",placement:"right",onClose:H,open:null===b||void 0===b?void 0:b.modalHas,children:(0,w.jsx)(N,{_onCloseModal:function(){return H()},orderId:null===b||void 0===b?void 0:b.orderId,sizePage:y})}):null]})}}}]);