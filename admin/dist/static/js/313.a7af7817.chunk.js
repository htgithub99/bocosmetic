"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[313],{7399:function(e,n,t){t.d(n,{$P:function(){return d},D2:function(){return l},vV:function(){return h},zQ:function(){return u}});var r=t(1881),i=t.n(r),a=t(644),s=t(8507),c=t(3938),o=i().create({timeout:18e4,baseURL:a.Z.API_DOMAIN});o.interceptors.request.use((function(e){var n=s.Z.get("token");return n&&(e.headers.Authorization=n),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){var n=e.config;if(401!==e.response.status)return Promise.reject(e);var t=s.Z.get("refreshToken");return t?i().post("".concat(a.Z.API_DOMAIN,"/v1/app/auth/request-access-token"),{refreshToken:t}).then((function(t){if(200===t.status){var r=t.data.data;return s.Z.set("token",r.token),n.headers.Authorization=r.token,i()(n)}return(0,c.k)(),Promise.reject(e)})).catch((function(){return(0,c.k)(),Promise.reject(e)})):((0,c.k)(),Promise.reject(e))}));var u=function(e,n){return o.get(e,{params:n}).then((function(e){return e.data}))},l=function(e,n,t){return o.post(e,n,{params:t}).then((function(e){return e.data}))},d=function(e,n){return o.put(e,n).then((function(e){return e.data}))},h=function(e,n){return o.delete(e,{params:n}).then((function(e){return e.data}))}},6710:function(e,n,t){t.d(n,{Ir:function(){return o},ll:function(){return a},nM:function(){return c},ry:function(){return s},xH:function(){return i}});var r=t(7399),i=function(e){return(0,r.zQ)("/product",e)},a=function(e){return(0,r.zQ)("/product/".concat(e))},s=function(e){return(0,r.D2)("/product/create",e)},c=function(e,n){return(0,r.$P)("/product/update/".concat(e),n)},o=function(e){return(0,r.vV)("/product/delete/".concat(e))}},3884:function(e,n,t){t.d(n,{L:function(){return a}});var r=t(7399),i=t(195),a=function(e){return(0,r.D2)(i.fX.UPLOAD_ADMIN_MULTIPLE_PATH,e)}},2377:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(1413),i=t(4925),a=t(6123),s=t.n(a),c=t(195),o=(t(7313),"styles_wrapButton__1Cj9L"),u="styles_wrapButton_delete__6BmeG",l="styles_wrapButton_edit__o68uf",d=t(6417),h=["children"],p=function(e){var n=e.children,t=(0,i.Z)(e,h),a=t.classNameX,p=void 0===a?"":a,f=t.classNameT,m=s()(o,p,function(){switch(f){case c.Bh.DELETE:return u;case c.Bh.EDIT:return l}}());return(0,d.jsx)("button",(0,r.Z)((0,r.Z)({},t),{},{className:m,children:n}))}},8982:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(6123),i=t.n(r),a="styles_wrapContainer__8r2Fh",s=t(6417),c=function(e){var n=e.classW,t=e.children;return(0,s.jsx)("div",{className:i()(n,a),children:t})}},2312:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(9439),i=t(6986),a=t(2231),s=t(2138),c=t(765),o=t(9491),u=t(4195),l=t(7313),d=t(5217),h={sticky__search:"styles_sticky__search__1RSXx",wrapSearchHeaderTable:"styles_wrapSearchHeaderTable__m2koT",search_item:"styles_search_item__Ms61U",wrapBtnHeaderTable:"styles_wrapBtnHeaderTable__FiIQD",btn__import:"styles_btn__import__zyCVp",btn_create:"styles_btn_create__sYpfS"},p=t(6417),f=function(e){var n=e._onCreate,t=e.btnCreateHas,f=void 0===t||t,m=e.btnHeaderImport,_=void 0===m||m,v=e._onSearchField,Z=e.placeholderInputSearch,x=(e.background,(0,d.Z)().isMobile),j=(0,l.useState)(""),g=(0,r.Z)(j,2),y=g[0],w=g[1];return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:h.sticky__search,children:[_&&(0,p.jsxs)("div",{className:h.wrapBtnHeaderTable,children:[(0,p.jsxs)("div",{className:h.btn__import,children:[(0,p.jsx)(o.ZP,{icon:(0,p.jsx)(i.Z,{}),htmlType:"button",size:x?"middle":"large",children:"Nh\u1eadp file"}),(0,p.jsx)(o.ZP,{icon:(0,p.jsx)(a.Z,{}),htmlType:"button",size:x?"middle":"large",children:"Xu\u1ea5t file"})]}),(0,p.jsx)("div",{className:h.btn_create,children:f&&(0,p.jsx)(o.ZP,{icon:(0,p.jsx)(s.Z,{}),htmlType:"button",size:x?"middle":"large",onClick:function(){return n&&n()},children:"T\u1ea1o m\u1edbi"})})]}),(0,p.jsxs)("div",{className:h.wrapSearchHeaderTable,children:[(0,p.jsx)("div",{className:h.search_item,children:(0,p.jsx)(u.Z,{size:x?"middle":"large",placeholder:Z,prefix:(0,p.jsx)(c.Z,{style:{fontSize:"18px",color:"#08c"}}),onChange:function(e){var n;w(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,p.jsx)("div",{className:h.search_button,children:(0,p.jsx)(o.ZP,{htmlType:"button",size:x?"middle":"large",onClick:function(){return v&&v(y)},children:"L\u01b0u b\u1ed9 l\u1ecdc"})})]})]})})}},5939:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(4165),i=t(5861),a=t(9439),s=t(8107),c=t(9017),o=t(7313),u=t(210),l={},d=t(6417),h=function(e){var n=e.getListImage,t=e.listDf,h=void 0===t?[]:t,p=e.listTotal,f=void 0===p?5:p,m=(0,o.useState)(h),_=(0,a.Z)(m,2),v=_[0],Z=_[1],x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.url){e.next=5;break}return e.next=4,(0,u.y3)(n);case 4:t=e.sent;case 5:(i=new Image).src=t,null===(a=window.open(t))||void 0===a||a.document.write(i.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.useLayoutEffect)((function(){n(v)}),[v]),(0,d.jsx)("div",{className:l.wrapUploadImage,children:(0,d.jsx)(c.Z,{rotationSlider:!0,modalTitle:"Upload \u1ea3nh",modalOk:"X\xe1c nh\u1eadn",modalCancel:"H\u1ee7y",aspect:16/9,children:(0,d.jsx)(s.Z,{accept:"image/png, image/jpeg",listType:"picture-card",fileList:v,onChange:function(e){var n=e.fileList;Z(n)},onPreview:x,children:v.length<f&&"Ch\u1ecdn \u1ea3nh"})})})}},644:function(e,n){n.Z={APP_ENV:"dev",API_DOMAIN:"http://14.225.255.230/api/admin",API_UPLOAD_DOMAIN:"http://14.225.255.230"}},210:function(e,n,t){t.d(n,{HU:function(){return i},VA:function(){return r},y3:function(){return a}});var r=function(e){var n,t;return null!==(n=null===e||void 0===e||null===(t=e.pages)||void 0===t?void 0:t.flatMap((function(e){return e.data})))&&void 0!==n?n:[]},i=function(e){var n;return null===e||void 0===e||null===(n=e.filter((function(e){return!e.parent_id})))||void 0===n?void 0:n.map((function(e){var n=e.category_name;return{value:e._id,label:n}}))},a=function(e){return new Promise((function(n){var t=new FileReader;t.readAsDataURL(e.originFileObj),t.onload=function(){return n(t.result)}}))}},8643:function(e,n,t){t.d(n,{U:function(){return r}});var r=function(e){return e[e.XXL=1536]="XXL",e[e.DT=1366]="DT",e[e.XL=1280]="XL",e[e.LG=1024]="LG",e[e.MD=768]="MD",e[e.SM=640]="SM",e[e.MB=375]="MB",e[e.XS=320]="XS",e}({})},1637:function(e,n,t){t.d(n,{l:function(){return r}});var r=function(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}},7218:function(e,n,t){t.d(n,{tv:function(){return s},ux:function(){return a}});var r=t(1122),i=t(644),a=function(e){r.ZP.destroy(),r.ZP.error(c(e)),"prod"!==i.Z.APP_ENV&&console.log(e)},s=function(e){r.ZP.destroy(),r.ZP.success(o(e)),"prod"!==i.Z.APP_ENV&&console.log(e)},c=function(e){var n,t;return(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Something went wrong!"},o=function(e){return(null===e||void 0===e?void 0:e.message)||""}},9313:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(1413),i=t(9439),a=t(6968),s=t(3299),c=t(6700),o=t(6710),u=t(2377),l=t(8982),d=t(2944),h={wrapContent:"styles_wrapContent__l4WTI",content_title:"styles_content_title__+tB9q",content_data:"styles_content_data__xkHsW",wrapListMeta:"styles_wrapListMeta__mea10",wrapDetailProduct:"styles_wrapDetailProduct__ttTYw",detailProduct__entryPrice:"styles_detailProduct__entryPrice__8RQVC",priceEntry:"styles_priceEntry__uSzqX"},p=t(6417),f=function(e){var n=e.isModalOpen,t=e._onSubmit,r=e._onClose,i=e.title,a=void 0===i?"Modal x\xf3a":i,s=e.descriptions,c=void 0===s?"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?":s;return(0,p.jsx)(d.Z,{title:a,centered:!0,open:n,okText:"X\xe1c nh\u1eadn",cancelText:"Tho\xe1t",onOk:t,onCancel:r,children:(0,p.jsx)("div",{className:h.wrapModalDelete,children:(0,p.jsx)("div",{className:h.modalDelete_content,children:(0,p.jsx)("p",{children:c})})})})},m=t(2312),_=t(195),v=t(1637),Z="X\xf3a s\u1ea3n ph\u1ea9m",x="B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a s\u1ea3n ph\u1ea9m n\xe0y kh\xf4ng?",j=t(7218),g=t(7313),y=t(56),w=t(5217),b=t(4165),P=t(5861),T=t(6908),N=t(4195),S=t(8197),I=t(9624),C=t(253),M=t(2084),k=t(9491),D=t(1245),L=t(3884),E=t(5939),A=t(644),z=t(210),O=t(8711),X={},H=function(e){var n=e._onCloseModal,t=e.sizePage,a=(0,D.Z)(),s=(0,i.Z)(a,1)[0],c=(0,O.Z)({}).categoryData,u=(0,y.useQueryClient)(),l=(0,g.useState)([]),d=(0,i.Z)(l,2),h=d[0],f=d[1],m=(0,y.useMutation)(function(){var e=(0,P.Z)((0,b.Z)().mark((function e(n){var t,i,a;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new FormData,h.forEach((function(e){i.append("file",e)})),e.next=4,(0,L.L)(i);case 4:return a=e.sent,e.next=7,(0,o.ry)((0,r.Z)((0,r.Z)({},n),{},{images:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.urls.map((function(e){return"".concat(A.Z.API_UPLOAD_DOMAIN).concat(e.path)}))}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSuccess:function(e){(0,j.tv)(e),s.resetFields(),n()},onError:function(e){(0,j.ux)(e)},onSettled:function(){u.invalidateQueries([_.S8.LIST_PRODUCT_KEY,t])}}),v=m.mutate;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:X.wrapCreateProduct,children:(0,p.jsxs)(T.Z,{form:s,layout:"vertical",onFinish:v,children:[(0,p.jsx)(T.Z.Item,{label:"T\xean s\u1ea3n ph\u1ea9m",rules:[{required:!0,message:""}],name:"product_name",children:(0,p.jsx)(N.Z,{placeholder:"Nh\u1eadp t\xean s\u1ea3n ph\u1ea9m"})}),(0,p.jsxs)(S.Z,{gutter:[16,16],children:[(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"Gi\xe1 b\xe1n",rules:[{required:!0,message:""}],name:"price",children:(0,p.jsx)(C.Z,{className:"w-100",prefix:"\uffe5",placeholder:"Nh\u1eadp gi\xe1 b\xe1n"})})}),(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"Gi\xe1 Sale",rules:[{required:!0,message:""}],name:"sale_price",children:(0,p.jsx)(C.Z,{className:"w-100",prefix:"\uffe5",placeholder:"Nh\u1eadp gi\xe1 sale"})})})]}),(0,p.jsxs)(S.Z,{gutter:[16,16],children:[(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"Lo\u1ea1i s\u1ea3n ph\u1ea9m",name:"category_id",rules:[{required:!0,message:""}],children:(0,p.jsx)(M.Z,{showSearch:!0,placeholder:"Ch\u1ecdn lo\u1ea1i s\u1ea3n ph\u1ea9m",optionFilterProp:"children",options:(0,z.HU)(null===c||void 0===c?void 0:c.data)})})}),(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"M\xe3 v\u1ea1ch",rules:[{required:!0,message:""}],name:"barcode",children:(0,p.jsx)(N.Z,{className:"w-100",placeholder:"Nh\u1eadp m\xe3 v\u1ea1ch"})})})]}),(0,p.jsxs)(S.Z,{gutter:[16,16],children:[(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"Gi\xe1 c\u1ed9ng t\xe1c vi\xean",rules:[{required:!0,message:""}],name:"vendor_price",children:(0,p.jsx)(C.Z,{className:"w-100",prefix:"\uffe5",placeholder:"Nh\u1eadp gi\xe1 c\u1ed9ng t\xe1c vi\xean"})})}),(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"Gi\xe1 nh\u1eadp",rules:[{required:!0,message:""}],name:"intial_price",children:(0,p.jsx)(C.Z,{prefix:"\uffe5",className:"w-100",placeholder:"Nh\u1eadp gi\xe1 nh\u1eadp"})})})]}),(0,p.jsxs)(S.Z,{gutter:[16,16],children:[(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"S\u1ed1 l\u01b0\u1ee3ng",rules:[{required:!0,message:""}],name:"quantity",children:(0,p.jsx)(C.Z,{className:"w-100",placeholder:"Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng"})})}),(0,p.jsx)(I.Z,{span:12,children:(0,p.jsx)(T.Z.Item,{label:"Chi nh\xe1nh",name:"branch",rules:[{required:!0,message:""}],children:(0,p.jsx)(M.Z,{showSearch:!0,placeholder:"Ch\u1ecdn chi nh\xe1nh",optionFilterProp:"children",options:_.gv})})})]}),(0,p.jsx)(T.Z.Item,{label:"\u1ea2nh s\u1ea3n ph\u1ea9m",name:"images",children:(0,p.jsx)(E.Z,{getListImage:function(e){return f(e.map((function(e){return e.originFileObj})))}})}),(0,p.jsx)(T.Z.Item,{children:(0,p.jsx)(k.ZP,{htmlType:"submit",children:"T\u1ea1o m\u1edbi"})})]})})})},F=t(5317),U=function(){var e=(0,y.useQueryClient)(),n=(0,g.useState)(!1),t=(0,i.Z)(n,2),d=t[0],h=t[1],b=(0,w.Z)(),P=b.isMobile,T=(b.width,(0,g.useState)({name:null})),N=(0,i.Z)(T,2),S=N[0],I=N[1],C=(0,g.useState)({isModal:!1,_id:""}),M=(0,i.Z)(C,2),k=M[0],D=M[1],L=(0,y.useQuery)([_.S8.LIST_PRODUCT_KEY,S],(function(){return(0,o.xH)(S)}),{}),E=L.data,A=L.isLoading,z=L.refetch,O=(0,y.useMutation)((function(e){return(0,o.Ir)(e)}),{onSuccess:function(e){(0,j.tv)(e),z()},onError:function(e){return(0,j.ux)(e)},onSettled:function(){return e.invalidateQueries([_.S8.LIST_PRODUCT_KEY,S])}}).mutate,X=[{title:"T\xean s\u1ea3n ph\u1ea9m",dataIndex:"product_name",align:"left",render:function(e){return(0,p.jsx)("a",{children:e})}},{title:"T\xe1c v\u1ee5",dataIndex:"action",width:P?95:200,align:"center",fixed:"right",render:function(e,n){return(0,p.jsx)(a.Z,{size:"middle",children:(0,p.jsx)(u.Z,{onClick:function(){return D({isModal:!0,_id:n._id})},classNameT:_.Bh.DELETE,children:"X\xf3a"})})}}],U=function(){return h(!1)},q=function(){D({isModal:!1,_id:""})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.Z,{_onSearchField:function(e){return function(e){I((0,r.Z)((0,r.Z)({},S),{},{name:e}))}(e)},_onCreate:function(){return h(!0)},placeholderInputSearch:"T\xecm ki\u1ebfm theo t\xean s\u1ea3n ph\u1ea9m..."}),(0,p.jsxs)(l.Z,{classW:"h-100",children:[(0,p.jsx)("div",{className:F.Z.wrapProduct,children:(0,p.jsx)("div",{className:F.Z.wrapContent,children:(0,p.jsx)(c.Z,{rowSelection:(0,r.Z)({type:"checkbox"},{onChange:function(e,n){},getCheckboxProps:function(e){return{disabled:!1,name:e.name}}}),columns:X,dataSource:function(){var e;return null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{key:e._id,price:(0,v.l)(null===e||void 0===e?void 0:e.price)})}))}(),loading:A,scroll:{y:_.X4}})})}),d?(0,p.jsx)(s.Z,{title:"T\u1ea1o s\u1ea3n ph\u1ea9m",placement:"right",onClose:U,open:d,size:P?"default":"large",children:(0,p.jsx)(H,{_onCloseModal:function(){return U()},sizePage:S})}):null]}),(0,p.jsx)(f,{isModalOpen:k.isModal,_onClose:q,_onSubmit:function(){O(k._id),q()},title:Z,descriptions:x})]})}},8711:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(1413),i=t(7399),a=function(e){return(0,i.zQ)("/category",e)},s=t(195),c=t(56);function o(e){e.enabled;var n=e.payload,t=(0,c.useQuery)([s.S8.GET_CATEGORY_KEY,n],(function(){return a((0,r.Z)((0,r.Z)({},n),{},{pageSize:500}))}));return{categoryData:t.data,refetchCategory:t.refetch}}},5217:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(9439),i=t(8643),a=t(7313);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.U.MD,n=(0,a.useState)(window.innerWidth),t=(0,r.Z)(n,2),s=t[0],c=t[1];return(0,a.useEffect)((function(){var e=function(){return c(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{isMobile:s<e,width:s}}},5317:function(e,n){n.Z={wrapProduct:"styles_wrapProduct__z1Hz7",wrapContent:"styles_wrapContent__MYsOK",wrapVariants:"styles_wrapVariants__qcQoW",wrapPurchaseOrders:"styles_wrapPurchaseOrders__X1Tdr",productVersionName:"styles_productVersionName__84ngg",wrapAction:"styles_wrapAction__1Y-yj"}}}]);