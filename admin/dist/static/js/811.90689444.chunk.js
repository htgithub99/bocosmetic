"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[811],{7399:function(e,n,r){r.d(n,{$P:function(){return d},D2:function(){return l},vV:function(){return h},zQ:function(){return u}});var t=r(1881),i=r.n(t),a=r(644),c=r(8507),s=r(3938),o=i().create({timeout:18e4,baseURL:a.Z.API_DOMAIN});o.interceptors.request.use((function(e){var n=c.Z.get("token");return n&&(e.headers.Authorization=n),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){var n=e.config;if(401!==e.response.status)return Promise.reject(e);var r=c.Z.get("refreshToken");return r?i().post("".concat(a.Z.API_DOMAIN,"/v1/app/auth/request-access-token"),{refreshToken:r}).then((function(r){if(200===r.status){var t=r.data.data;return c.Z.set("token",t.token),n.headers.Authorization=t.token,i()(n)}return(0,s.k)(),Promise.reject(e)})).catch((function(){return(0,s.k)(),Promise.reject(e)})):((0,s.k)(),Promise.reject(e))}));var u=function(e,n){return o.get(e,{params:n}).then((function(e){return e.data}))},l=function(e,n,r){return o.post(e,n,{params:r}).then((function(e){return e.data}))},d=function(e,n){return o.put(e,n).then((function(e){return e.data}))},h=function(e,n){return o.delete(e,{params:n}).then((function(e){return e.data}))}},6710:function(e,n,r){r.d(n,{Ir:function(){return o},ll:function(){return a},nM:function(){return s},ry:function(){return c},xH:function(){return i}});var t=r(7399),i=function(e){return(0,t.zQ)("/product",e)},a=function(e){return(0,t.zQ)("/product/".concat(e))},c=function(e){return(0,t.D2)("/product/create",e)},s=function(e,n){return(0,t.$P)("/product/update/".concat(e),n)},o=function(e){return(0,t.vV)("/product/delete/".concat(e))}},3884:function(e,n,r){r.d(n,{L:function(){return a}});var t=r(7399),i=r(195),a=function(e){return(0,t.D2)(i.fX.UPLOAD_ADMIN_MULTIPLE_PATH,e)}},2377:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(1413),i=r(4925),a=r(6123),c=r.n(a),s=r(195),o=(r(7313),"styles_wrapButton__1Cj9L"),u="styles_wrapButton_delete__6BmeG",l="styles_wrapButton_edit__o68uf",d=r(6417),h=["children"],f=function(e){var n=e.children,r=(0,i.Z)(e,h),a=r.classNameX,f=void 0===a?"":a,p=r.classNameT,m=c()(o,f,function(){switch(p){case s.Bh.DELETE:return u;case s.Bh.EDIT:return l}}());return(0,d.jsx)("button",(0,t.Z)((0,t.Z)({},r),{},{className:m,children:n}))}},8982:function(e,n,r){r.d(n,{Z:function(){return s}});var t=r(6123),i=r.n(t),a="styles_wrapContainer__8r2Fh",c=r(6417),s=function(e){var n=e.classW,r=e.children;return(0,c.jsx)("div",{className:i()(n,a),children:r})}},2312:function(e,n,r){r.d(n,{Z:function(){return p}});var t=r(9439),i=r(6986),a=r(2231),c=r(2138),s=r(765),o=r(9491),u=r(4195),l=r(7313),d=r(5217),h={sticky__search:"styles_sticky__search__1RSXx",wrapSearchHeaderTable:"styles_wrapSearchHeaderTable__m2koT",search_item:"styles_search_item__Ms61U",wrapBtnHeaderTable:"styles_wrapBtnHeaderTable__FiIQD",btn__import:"styles_btn__import__zyCVp",btn_create:"styles_btn_create__sYpfS"},f=r(6417),p=function(e){var n=e._onCreate,r=e.btnCreateHas,p=void 0===r||r,m=e.btnHeaderImport,v=void 0===m||m,_=e._onSearchField,Z=e.placeholderInputSearch,x=(e.background,(0,d.Z)().isMobile),g=(0,l.useState)(""),j=(0,t.Z)(g,2),w=j[0],b=j[1];return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:h.sticky__search,children:[v&&(0,f.jsxs)("div",{className:h.wrapBtnHeaderTable,children:[(0,f.jsxs)("div",{className:h.btn__import,children:[(0,f.jsx)(o.ZP,{icon:(0,f.jsx)(i.Z,{}),htmlType:"button",size:x?"middle":"large",children:"Nh\u1eadp file"}),(0,f.jsx)(o.ZP,{icon:(0,f.jsx)(a.Z,{}),htmlType:"button",size:x?"middle":"large",children:"Xu\u1ea5t file"})]}),(0,f.jsx)("div",{className:h.btn_create,children:p&&(0,f.jsx)(o.ZP,{icon:(0,f.jsx)(c.Z,{}),htmlType:"button",size:x?"middle":"large",onClick:function(){return n&&n()},children:"T\u1ea1o m\u1edbi"})})]}),(0,f.jsxs)("div",{className:h.wrapSearchHeaderTable,children:[(0,f.jsx)("div",{className:h.search_item,children:(0,f.jsx)(u.Z,{size:x?"middle":"large",placeholder:Z,prefix:(0,f.jsx)(s.Z,{style:{fontSize:"18px",color:"#08c"}}),onChange:function(e){var n;b(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,f.jsx)("div",{className:h.search_button,children:(0,f.jsx)(o.ZP,{htmlType:"button",size:x?"middle":"large",onClick:function(){return _&&_(w)},children:"L\u01b0u b\u1ed9 l\u1ecdc"})})]})]})})}},5939:function(e,n,r){r.d(n,{Z:function(){return h}});var t=r(4165),i=r(5861),a=r(9439),c=r(8107),s=r(9017),o=r(7313),u=r(210),l={},d=r(6417),h=function(e){var n=e.getListImage,r=e.listDf,h=void 0===r?[]:r,f=e.listTotal,p=void 0===f?5:f,m=(0,o.useState)(h),v=(0,a.Z)(m,2),_=v[0],Z=v[1],x=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var r,i,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.url){e.next=5;break}return e.next=4,(0,u.y3)(n);case 4:r=e.sent;case 5:(i=new Image).src=r,null===(a=window.open(r))||void 0===a||a.document.write(i.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.useLayoutEffect)((function(){n(_)}),[_]),(0,d.jsx)("div",{className:l.wrapUploadImage,children:(0,d.jsx)(s.Z,{rotationSlider:!0,modalTitle:"Upload \u1ea3nh",modalOk:"X\xe1c nh\u1eadn",modalCancel:"H\u1ee7y",aspect:16/9,children:(0,d.jsx)(c.Z,{accept:"image/png, image/jpeg",listType:"picture-card",fileList:_,onChange:function(e){var n=e.fileList;Z(n)},onPreview:x,children:_.length<p&&"Ch\u1ecdn \u1ea3nh"})})})}},1145:function(e,n,r){r.d(n,{S:function(){return t}});var t=function(e,n){return n?e-30:e-310}},644:function(e,n){n.Z={APP_ENV:"dev",API_DOMAIN:"http://14.225.255.230/api/admin",API_UPLOAD_DOMAIN:"http://14.225.255.230"}},210:function(e,n,r){r.d(n,{HU:function(){return i},VA:function(){return t},y3:function(){return a}});var t=function(e){var n,r;return null!==(n=null===e||void 0===e||null===(r=e.pages)||void 0===r?void 0:r.flatMap((function(e){return e.data})))&&void 0!==n?n:[]},i=function(e){var n;return null===e||void 0===e||null===(n=e.filter((function(e){return!e.parent_id})))||void 0===n?void 0:n.map((function(e){var n=e.category_name;return{value:e._id,label:n}}))},a=function(e){return new Promise((function(n){var r=new FileReader;r.readAsDataURL(e.originFileObj),r.onload=function(){return n(r.result)}}))}},8643:function(e,n,r){r.d(n,{U:function(){return t}});var t=function(e){return e[e.XXL=1536]="XXL",e[e.DT=1366]="DT",e[e.XL=1280]="XL",e[e.LG=1024]="LG",e[e.MD=768]="MD",e[e.SM=640]="SM",e[e.MB=375]="MB",e[e.XS=320]="XS",e}({})},1637:function(e,n,r){r.d(n,{l:function(){return t}});var t=function(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}},7218:function(e,n,r){r.d(n,{tv:function(){return c},ux:function(){return a}});var t=r(1122),i=r(644),a=function(e){t.ZP.destroy(),t.ZP.error(s(e)),"prod"!==i.Z.APP_ENV&&console.log(e)},c=function(e){t.ZP.destroy(),t.ZP.success(o(e)),"prod"!==i.Z.APP_ENV&&console.log(e)},s=function(e){var n,r;return(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Something went wrong!"},o=function(e){return(null===e||void 0===e?void 0:e.message)||""}},811:function(e,n,r){r.r(n),r.d(n,{default:function(){return U}});var t=r(1413),i=r(9439),a=r(6385),c=r(6968),s=r(3299),o=r(6700),u=r(6710),l=r(2377),d=r(8982),h=r(2312),f=r(1145),p=r(195),m=r(8643),v=r(1637),_=r(7313),Z=r(56),x=r(2135),g=r(5217),j=r(4165),w=r(5861),b=r(6908),y=r(4195),I=r(253),P=r(8197),N=r(9624),T=r(2084),S=r(9491),D=r(1245),C=r(3884),L=r(5939),k=r(644),M=r(210),A=r(7218),E=r(8711),z={},H=r(6417),F=function(e){var n=e.productId,r=e._onCloseModal,a=e.sizePage,c=(0,D.Z)(),s=(0,i.Z)(c,1)[0],o=(0,Z.useQueryClient)(),l=(0,E.Z)({}).categoryData,d=(0,_.useState)([]),h=(0,i.Z)(d,2),f=h[0],m=h[1],v=(0,Z.useQuery)([p.S8.GET_BY_ID_PRODUCT,n],(function(){return(0,u.ll)(n)}),{enabled:Boolean(n)}),x=v.data,g=(v.isLoading,(0,Z.useMutation)(function(){var e=(0,w.Z)((0,j.Z)().mark((function e(r){var i,a,c,s;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!f.length){e.next=8;break}return c=new FormData,f.forEach((function(e){c.append("file",e)})),e.next=6,(0,C.L)(c);case 6:s=e.sent,i=null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.urls.map((function(e){return"".concat(k.Z.API_UPLOAD_DOMAIN).concat(e.path)}));case 8:return e.next=10,(0,u.nM)(n,(0,t.Z)((0,t.Z)({},r),{},{images:i}));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSuccess:function(e){(0,A.tv)(e),s.resetFields(),r()},onSettled:function(){o.invalidateQueries([p.S8.LIST_PRODUCT_KEY,a])}})),F=g.mutate;return(0,_.useEffect)((function(){var e,n;return s.setFieldsValue(null===x||void 0===x?void 0:x.data),m(null===x||void 0===x||null===(e=x.data)||void 0===e||null===(n=e.images)||void 0===n?void 0:n.map((function(e,n){return{url:e,uid:n+1}}))),function(){return s.resetFields()}}),[x]),(0,H.jsx)(H.Fragment,{children:(0,H.jsx)("div",{className:z.wrapEditProduct,children:(0,H.jsxs)(b.Z,{form:s,layout:"vertical",onFinish:F,children:[(0,H.jsx)(b.Z.Item,{label:"T\xean s\u1ea3n ph\u1ea9m",rules:[{required:!0,message:""}],name:"product_name",children:(0,H.jsx)(y.Z,{placeholder:"Nh\u1eadp t\xean s\u1ea3n ph\u1ea9m"})}),(0,H.jsx)(b.Z.Item,{label:"Gi\xe1 b\xe1n",rules:[{required:!0,message:""}],name:"price",children:(0,H.jsx)(I.Z,{className:"w-100",prefix:"\uffe5",placeholder:"Nh\u1eadp gi\xe1 b\xe1n"})}),(0,H.jsxs)(P.Z,{gutter:[16,16],children:[(0,H.jsx)(N.Z,{span:12,children:(0,H.jsx)(b.Z.Item,{label:"Danh m\u1ee5c s\u1ea3n ph\u1ea9m",name:"category_id",rules:[{required:!0,message:""}],children:(0,H.jsx)(T.Z,{showSearch:!0,placeholder:"Ch\u1ecdn danh m\u1ee5c s\u1ea3n ph\u1ea9m",optionFilterProp:"children",options:(0,M.HU)(null===l||void 0===l?void 0:l.data)})})}),(0,H.jsx)(N.Z,{span:12,children:(0,H.jsx)(b.Z.Item,{label:"M\xe3 v\u1ea1ch",rules:[{required:!0,message:""}],name:"barcode",children:(0,H.jsx)(y.Z,{className:"w-100",placeholder:"Nh\u1eadp m\xe3 v\u1ea1ch"})})})]}),(0,H.jsxs)(P.Z,{gutter:[16,16],children:[(0,H.jsx)(N.Z,{span:12,children:(0,H.jsx)(b.Z.Item,{label:"Gi\xe1 c\u1ed9ng t\xe1c vi\xean",rules:[{required:!0,message:""}],name:"vendor_price",children:(0,H.jsx)(I.Z,{className:"w-100",prefix:"\uffe5",placeholder:"Nh\u1eadp gi\xe1 c\u1ed9ng t\xe1c vi\xean"})})}),(0,H.jsx)(N.Z,{span:12,children:(0,H.jsx)(b.Z.Item,{label:"Gi\xe1 nh\u1eadp",rules:[{required:!0,message:""}],name:"intial_price",children:(0,H.jsx)(I.Z,{prefix:"\uffe5",className:"w-100",placeholder:"Nh\u1eadp gi\xe1 nh\u1eadp"})})})]}),(0,H.jsxs)(P.Z,{gutter:[16,16],children:[(0,H.jsx)(N.Z,{span:12,children:(0,H.jsx)(b.Z.Item,{label:"S\u1ed1 l\u01b0\u1ee3ng",rules:[{required:!0,message:""}],name:"quantity",children:(0,H.jsx)(I.Z,{className:"w-100",placeholder:"Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng"})})}),(0,H.jsx)(N.Z,{span:12,children:(0,H.jsx)(b.Z.Item,{label:"Chi nh\xe1nh",name:"branch",rules:[{required:!0,message:""}],children:(0,H.jsx)(T.Z,{showSearch:!0,placeholder:"Ch\u1ecdn chi nh\xe1nh",optionFilterProp:"children",options:p.gv})})})]}),(0,H.jsx)(b.Z.Item,{label:"\u1ea2nh s\u1ea3n ph\u1ea9m",name:"images",children:(0,H.jsx)(L.Z,{getListImage:function(e){e.length&&m(e.map((function(e){return e.originFileObj})))},listDf:f})}),(0,H.jsx)(b.Z.Item,{children:(0,H.jsx)(S.ZP,{htmlType:"submit",children:"Ch\u1ec9nh s\u1eeda"})})]})})})},O=r(5317),U=function(){var e=(0,g.Z)(),n=e.isMobile,r=e.width,j=(0,g.Z)(m.U.LG).isMobile,w=(0,_.useState)({name:null}),b=(0,i.Z)(w,2),y=b[0],I=b[1],P=(0,_.useState)({productId:null,modalHas:!1}),N=(0,i.Z)(P,2),T=N[0],S=N[1],D=(0,Z.useQuery)([p.S8.LIST_PRODUCT_KEY,y],(function(){return(0,u.xH)(y)}),{}),C=D.data,L=D.isLoading,k=[{title:"M\xe3 v\u1ea1ch",dataIndex:"barcode",align:"center",width:n?125:170,render:function(e){return(0,H.jsx)("a",{children:e})}},{title:"\u1ea2nh",dataIndex:"images",align:"center",width:n?125:150,render:function(e){return e.length?(0,H.jsx)(a.Z,{src:e[0],alt:e[0]}):(0,H.jsx)("span",{className:"material-symbols-outlined",children:"imagesmode"})}},{title:"T\u1ed3n kho",dataIndex:"quantity",align:"center",width:n?125:170,render:function(e){return e}},{title:"Gi\xe1 b\xe1n l\u1ebb",dataIndex:"price",align:"center",width:n?125:170,render:function(e){return e}},{title:"T\xean phi\xean b\u1ea3n s\u1ea3n ph\u1ea9m",dataIndex:"product_version_name",align:"left",width:n?250:300,render:function(e){var n=e.product_name,r=e.barcode;return(0,H.jsxs)("div",{className:O.Z.productVersionName,children:[(0,H.jsx)(x.rU,{to:"#",children:n}),(0,H.jsx)("p",{children:r})]})}},{title:"T\xe1c v\u1ee5",dataIndex:"action",width:n?125:200,align:"center",fixed:"right",render:function(e,n){return(0,H.jsxs)(c.Z,{size:"middle",children:[(0,H.jsx)(l.Z,{onClick:function(){return M(n)},classNameT:p.Bh.EDIT,children:"S\u1eeda"}),(0,H.jsx)(l.Z,{classNameT:p.Bh.DELETE,children:"X\xf3a"})]})}}],M=function(e){var n=e._id;S({productId:n,modalHas:!0})},A=function(){return S({productId:null,modalHas:!1})};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(h.Z,{_onSearchField:function(e){return function(e){I((0,t.Z)((0,t.Z)({},y),{},{name:e}))}(e)},btnCreateHas:!1}),(0,H.jsxs)(d.Z,{classW:"h-100",children:[(0,H.jsx)("div",{className:O.Z.wrapVariants,children:(0,H.jsx)("div",{className:O.Z.wrapContent,children:(0,H.jsx)(o.Z,{style:{width:(0,f.S)(r,j)},rowSelection:(0,t.Z)({type:"checkbox"},{onChange:function(e,n){},getCheckboxProps:function(e){return{disabled:!1,barcode:e.barcode}}}),columns:k,dataSource:function(){var e;return null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.map((function(e){return(0,t.Z)((0,t.Z)({},e),{},{key:e._id,product_version_name:e,price:(0,v.l)(null===e||void 0===e?void 0:e.price)})}))}(),loading:L,scroll:{y:p.X4}})})}),T.modalHas?(0,H.jsx)(s.Z,{title:"S\u1eeda s\u1ea3n ph\u1ea9m",placement:"right",onClose:A,open:T.modalHas,size:n?"default":"large",children:(0,H.jsx)(F,{productId:T.productId,_onCloseModal:function(){return A()},sizePage:y})}):null]})]})}},8711:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(1413),i=r(7399),a=function(e){return(0,i.zQ)("/category",e)},c=r(195),s=r(56);function o(e){e.enabled;var n=e.payload,r=(0,s.useQuery)([c.S8.GET_CATEGORY_KEY,n],(function(){return a((0,t.Z)((0,t.Z)({},n),{},{pageSize:500}))}));return{categoryData:r.data,refetchCategory:r.refetch}}},5217:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(9439),i=r(8643),a=r(7313);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.U.MD,n=(0,a.useState)(window.innerWidth),r=(0,t.Z)(n,2),c=r[0],s=r[1];return(0,a.useEffect)((function(){var e=function(){return s(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{isMobile:c<e,width:c}}},5317:function(e,n){n.Z={wrapProduct:"styles_wrapProduct__z1Hz7",wrapContent:"styles_wrapContent__MYsOK",wrapVariants:"styles_wrapVariants__qcQoW",wrapPurchaseOrders:"styles_wrapPurchaseOrders__X1Tdr",productVersionName:"styles_productVersionName__84ngg",wrapAction:"styles_wrapAction__1Y-yj"}}}]);